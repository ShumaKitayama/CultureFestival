# 🎨 展示会向け浮遊アートシステム

参加者が描いた絵が共通画面上で美しく浮遊・アニメーションする展示会向けシステムです。

## ✨ 特徴

- **美しい浮遊アニメーション**: 5 種類のアニメーション（pulsate, disperse, explode, spin_fight, stream_in）
- **リアルタイム表示**: WebSocket による即座の反映
- **マルチディスプレイ対応**: 複数画面での壁面合成
- **直感的な操作**: 簡単な Web インターフェース
- **Docker 対応**: 簡単なセットアップとデプロイ

## 🏗️ システム構成

### フロントエンド

- **upload-app** (ポート 3000): お絵かき・アップロード機能
- **display-app** (ポート 3001): 浮遊表示システム
- **ops-app** (ポート 3002): 運用作成 UI

### バックエンド

- **Go + Gin**: REST API + WebSocket
- **MySQL**: データ永続化
- **Redis**: リアルタイム通信

## 🚀 クイックスタート

### 1. 環境準備

```bash
# リポジトリをクローン
git clone <repository-url>
cd CultureFestival

# 環境変数を設定
cp .env.example .env
# .envファイルを編集して設定を調整
```

### 2. Docker で起動

```bash
# 全サービスを起動
docker-compose up -d

# ログを確認
docker-compose logs -f
```

### 3. アクセス

- **お絵かきアプリ**: http://localhost:3000
- **浮遊表示**: http://localhost:3001
- **運用作成**: http://localhost:3002
- **API**: http://localhost:8080

## 📱 使用方法

### 1. 作品を描いてアップロード

1. http://localhost:3000 にアクセス
2. マンダラ風の対称描画で作品を作成
3. 「アップロード」ボタンでサーバに送信
4. 自動的に浮遊表示に追加される

### 2. 浮遊表示を確認

1. http://localhost:3001 にアクセス
2. アップロードした作品が美しく浮遊する様子を確認
3. デバッグ表示でエンティティの状態を監視

### 3. 運用作成

1. http://localhost:3002 にアクセス
2. シーンを作成・管理
3. アートワークを手動でシーンに追加
4. シーンのリセット・管理

## 🎮 アニメーション種類

1. **pulsate**: 拡大縮小を繰り返す
2. **disperse**: パーティクルに分解して再結合
3. **explode**: 爆散して消滅または再生
4. **spin_fight**: 近傍のペアと高速回転して衝突
5. **stream_in**: 画面端から流れてくる

## 🔧 開発・カスタマイズ

### バックエンド開発

```bash
cd back
go mod tidy
go run cmd/server/main.go
```

### フロントエンド開発

各アプリの HTML/JS/CSS ファイルを編集

### データベース管理

```bash
# MySQLに接続
docker exec -it culture_festival_mysql mysql -u exhibit_user -p exhibit

# マイグレーション実行
# 既に自動実行されています
```

## 📊 API 仕様

### アートワーク

- `POST /api/artworks` - 画像アップロード
- `GET /api/artworks/{id}` - アートワーク取得
- `GET /download/{token}` - 画像ダウンロード

### シーン

- `POST /api/scenes` - シーン作成
- `GET /api/scenes` - シーン一覧
- `GET /api/scenes/{id}` - シーン詳細
- `POST /api/scenes/{id}/entities` - エンティティ追加
- `POST /api/scenes/{id}/reset` - シーンリセット

### WebSocket

- `ws://localhost:8080/ws` - リアルタイム通信

## 🎯 展示会での運用

### 事前準備

1. 会場のネットワーク環境を確認
2. ディスプレイの配置と解像度を設定
3. デフォルトシーン（ID=1）を設定

### 当日の運用

1. システムを起動
2. 参加者にお絵かきアプリの URL を案内
3. 浮遊表示を会場に投影
4. 必要に応じて運用作成 UI で調整

### トラブルシューティング

- 接続が不安定な場合: ブラウザをリフレッシュ
- 表示が止まった場合: 運用作成 UI でシーンをリセット
- パフォーマンス問題: エンティティ数を制限

## 🔒 セキュリティ

- API Key 認証（開発環境では簡易設定）
- 画像サイズ制限（最大 1024px, 1-3MB）
- CORS 設定済み

## 📈 パフォーマンス

- 同時接続数: 100 人程度想定
- エンティティ数: 200 個程度まで安定動作
- 画像最適化: WebP 変換、サムネイル生成

## 🤝 貢献

1. フォーク
2. フィーチャーブランチを作成
3. 変更をコミット
4. プルリクエストを作成

## 📄 ライセンス

MIT License

## 🆘 サポート

問題が発生した場合は、GitHub の Issues で報告してください。

---

**チームラボ風の美しい展示会システムをお楽しみください！** ✨
